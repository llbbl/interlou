<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode | default "en" }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} - {{ .Site.Title }}{{ end }}</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@700&family=Rubik:wght@400;700;800&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="{{ "css/styles.css" | relURL }}?v={{ now.Unix }}">

  <!-- Highlight.js for syntax highlighting -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/tokyo-night-dark.min.css">

  <link rel="shortcut icon" href="https://micro.blog/{{ .Site.Author.username }}/favicon.png" type="image/x-icon">
  
  {{ with .Site.Params.author }}<meta name="author" content="{{ . }}">{{ end }}
  {{ with .Site.Params.description }}<meta name="description" content="{{ . }}">{{ end }}
  
  <link rel="canonical" href="{{ .Permalink }}">
  {{ range .AlternativeOutputFormats -}}
    {{ printf `<link rel="%s" type="%s" href="%s" title="%s" />` .Rel .MediaType.Type .Permalink $.Site.Title | safeHTML }}
  {{ end -}}
  
  {{ template "_internal/opengraph.html" . }}
  {{ template "_internal/twitter_cards.html" . }}
</head>
<body>
  <div class="wrapper">
    <header class="site-header">
      <div class="site-branding">
        {{ with .Site.Author.avatar }}
          <a href="/" class="site-image-link"><img src="{{ . }}" class="site-image" alt="{{ $.Site.Title }}" loading="lazy"></a>
        {{ end }}
        <h1><a class="site-title" href="{{ "/" | relURL }}">{{ .Site.Title }}</a></h1>
      </div>
      {{ partial "navigation.html" . }}
    </header>

    <main class="page-content">
      {{ block "main" . }}{{ end }}
    </main>

    <footer class="site-footer">
      {{ with .Site.Params.footer }}
        <p>{{ . | safeHTML }}</p>
      {{ end }}
    </footer>
  </div>

  {{ template "_internal/google_analytics.html" . }}

  <!-- Highlight.js (includes 40+ common languages: js, ts, python, go, php, rust, bash, etc.) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
  <script>
    // Extend bash highlighting with custom CLI tools in different categories
    const bash = hljs.getLanguage('bash');

    // Package managers & language CLIs (keyword color - typically purple/pink)
    bash.keywords.keyword = (bash.keywords.keyword || '') + ' go npm pnpm yarn pip poetry cargo composer rustup gem bundle bun deno node python ruby php java';

    // Container, infrastructure tools & common shell commands (built_in color - yellow/tan)
    // Include core bash built-ins explicitly to ensure they're not lost
    bash.keywords.built_in += ' docker kubectl terraform ansible helm vault consul cd ls cat echo mkdir rm rmdir cp mv touch chmod chown grep sed awk find head tail sort uniq wc man less more tar gzip gunzip zip unzip ssh scp rsync pwd export source alias unalias history which whereis whoami hostname date cal df du free top ps kill killall jobs bg fg nohup xargs tee tr cut paste join diff cmp file stat readlink basename dirname';

    // Custom tools & utilities (literal color - typically cyan/blue)
    bash.keywords.literal = (bash.keywords.literal || '') + ' api2spec hugo jekyll brew apt apt-get yum dnf pacman wget curl git gh make cmake ninja gcc clang rustc javac tsc esbuild vite webpack';

    hljs.highlightAll();
  </script>
</body>
</html>
